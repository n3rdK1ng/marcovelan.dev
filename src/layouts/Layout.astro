---
import { getLangFromUrl } from '../i18n/utils'

interface Props {
	title: string
	description: string
}

const { title, description } = Astro.props

const lang = getLangFromUrl(Astro.url)
---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="UTF-8" />
		<meta name="description" property="og:description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<!-- Cal element-click embed code begins -->
		<script type="text/javascript">
			;(function (C, A, L) {
				let p = function (a, ar) {
					a.q.push(ar)
				}
				let d = C.document
				C.Cal =
					C.Cal ||
					function () {
						let cal = C.Cal
						let ar = arguments
						if (!cal.loaded) {
							cal.ns = {}
							cal.q = cal.q || []
							d.head.appendChild(d.createElement('script')).src = A
							cal.loaded = true
						}
						if (ar[0] === L) {
							const api = function () {
								p(api, arguments)
							}
							const namespace = ar[1]
							api.q = api.q || []
							if (typeof namespace === 'string') {
								cal.ns[namespace] = cal.ns[namespace] || api
								p(cal.ns[namespace], ar)
								p(cal, ['initNamespace', namespace])
							} else p(cal, ar)
							return
						}
						p(cal, ar)
					}
			})(window, 'https://app.cal.com/embed/embed.js', 'init')
			Cal('init', { origin: 'https://cal.com' })
			Cal('ui', {
				theme: 'dark',
				styles: { branding: { brandColor: '#18181b' } },
				hideEventTypeDetails: true,
				layout: 'month_view',
			})
		</script>
		<!-- Cal element-click embed code ends -->
	</head>
	<body
		class="h-full w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"
	>
		<slot />
	</body>
</html>
<style is:global>
	html {
		font-family:
			ui-sans-serif,
			-apple-system,
			BlinkMacSystemFont,
			'Segoe UI',
			Helvetica,
			'Apple Color Emoji',
			Arial,
			sans-serif,
			'Segoe UI Emoji',
			'Segoe UI Symbol';
	}
</style>
